<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Management Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        /* Your existing styles */
        .crad-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .crad {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-left: 4px solid #007bff;
        }
        
        .crad h6 {
            color: #666;
            margin-bottom: 10px;
        }
        
        .crad p span {
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }
        
        .events-container {
            margin-top: 30px;
        }
        
        .event {
            background: white;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border-left: 4px solid #28a745;
        }
        
        .event span {
            display: inline-block;
            margin-right: 20px;
            margin-bottom: 10px;
            color: #666;
        }
        
        .event span i {
            margin-right: 5px;
            color: #007bff;
        }

        /* Edit box styles */
        #editBox {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            z-index: 1000;
            min-width: 400px;
        }
        
        #editBox label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        #editBox input, #editBox select {
            width: 100%;
            padding: 8px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <!-- Header iframe -->
    <iframe src="header.html" width="100%" height="80" frameborder="0"></iframe>
<script>
    // Listen for navigation messages from header iframe
    window.addEventListener('message', function(event) {
        if (event.data.type === 'NAVIGATE') {
            window.location.href = event.data.url;
        }
    });

    // Update header active state
    function updateHeaderActiveState() {
        const currentPage = window.location.pathname.split('/').pop();
        const headerFrame = document.querySelector('iframe[src*="header.html"]');
        if (headerFrame && headerFrame.contentWindow) {
            headerFrame.contentWindow.postMessage({
                type: 'UPDATE_ACTIVE_LINK',
                activePage: currentPage
            }, '*');
        }
    }

    // Call on page load
    document.addEventListener('DOMContentLoaded', updateHeaderActiveState);
    </script>
</body>
    <!-- Your existing main content - unchanged -->
    <main class="container-fluid mt-4">
        <div class="row">
            <div class="col-12">
                <h2>Dashboard</h2>
                <p>Monitor and manage university events</p>

                <div class="crad-container">
                    <section class="crad">
                        <h6>Total Events <i class="fa-regular fa-calendar"></i></h6>
                        <p><span>8 </span>All time</p>
                    </section>
                    <section class="crad">
                        <h6>Upcoming <i class="fa-regular fa-upload"></i></h6>
                        <p><span>7 </span>Scheduled</p>
                    </section>
                    <section class="crad">
                        <h6>Pending <i class="fa-regular fa-hourglass-half"></i></h6>
                        <p><span>3 </span>Events</p>
                    </section>
                    <section class="crad">
                        <h6>Completed <i class="fa-regular fa-circle-check"></i></h6>
                        <p><span>1 </span>Successfully finished</p>
                    </section>
                </div>

                <div class="mt-5">
                    <h3>ðŸ“Š Events Per Month</h3>
                    <canvas id="eventsPerMonth"></canvas>
                </div>

                <div class="events-container mt-5">
                    <h2>Upcoming Events</h2>

                    <section class="event">
                        <h4 style="display: inline;">AI Hackathon 2025</h4> 
                        <p class="alert alert-info" role="alert" style="display: inline-block; background-color: rgb(185, 255, 232);">Upcoming</p>
                        <p>Join us for an exciting 48-hour AI hackathon where students collaborate to build innovative AI solutions.</p>
                        <span><i class="fa-regular fa-calendar"></i> <span class="event-date">Tue, Oct 21, 2025</span></span>
                        <span><i class="fa-regular fa-clock"></i> <span class="event-time">10:00 AM</span></span>
                        <span><i class="fa-solid fa-location-dot"></i> <span class="event-hall">Gaming Hall</span></span>
                        <span><i class="fa-regular fa-building"></i> Artificial Intelligence</span>
                        <span><i class="fa-solid fa-person"></i> 45/50 registered</span>
                        <button type="button" class="btn btn-light editBtn">Edit</button>
                        <button type="button" class="btn btn-danger deleteBtn">Delete</button>
                    </section>

                    <section class="event">
                        <h4 style="display: inline;">Engineering Career Fair</h4> 
                        <p class="alert alert-info" role="alert" style="display: inline-block; background-color: rgb(185, 255, 232);">Upcoming</p>
                        <p>Meet top employers and explore career opportunities in engineering fields.</p>
                        <span><i class="fa-regular fa-calendar"></i> <span class="event-date">Sat, Oct 25, 2025</span></span>
                        <span><i class="fa-regular fa-clock"></i> <span class="event-time">09:00 AM</span></span>
                        <span><i class="fa-solid fa-location-dot"></i> <span class="event-hall">Main Hall</span></span>
                        <span><i class="fa-regular fa-building"></i> Engineering</span>
                        <span><i class="fa-solid fa-person"></i> 100/150 registered</span>
                        <button type="button" class="btn btn-light editBtn">Edit</button>
                        <button type="button" class="btn btn-danger deleteBtn">Delete</button>
                    </section>

                    <section class="event">
                        <h4 style="display: inline;">Research Symposium</h4> 
                        <p class="alert alert-info" role="alert" style="display: inline-block; background-color: rgb(185, 255, 232);">Upcoming</p>
                        <p>Showcase of undergraduate and graduate research projects across all faculties.</p>
                        <span><i class="fa-regular fa-calendar"></i> <span class="event-date">Sun, Oct 26, 2025</span></span>
                        <span><i class="fa-regular fa-clock"></i> <span class="event-time">02:00 PM</span></span>
                        <span><i class="fa-solid fa-location-dot"></i> <span class="event-hall">Room 13</span></span>
                        <span><i class="fa-regular fa-building"></i> Research & Development</span>
                        <span><i class="fa-solid fa-person"></i> 80/100 registered</span>
                        <button type="button" class="btn btn-light editBtn">Edit</button>
                        <button type="button" class="btn btn-danger deleteBtn">Delete</button>
                    </section>

                    <section class="event">
                        <h4 style="display: inline;">Business Leadership Workshop</h4> 
                        <p class="alert alert-info" role="alert" style="display: inline-block; background-color: rgb(185, 255, 232);">Upcoming</p>
                        <p>Learn essential leadership skills from industry experts and successful entrepreneurs.</p>
                        <span><i class="fa-regular fa-calendar"></i> <span class="event-date">Tue, Oct 28, 2025</span></span>
                        <span><i class="fa-regular fa-clock"></i> <span class="event-time">01:00 PM</span></span>
                        <span><i class="fa-solid fa-location-dot"></i> <span class="event-hall">Room 26</span></span>
                        <span><i class="fa-regular fa-building"></i> Business Administration</span>
                        <span><i class="fa-solid fa-person"></i> 40/40 registered</span>
                        <button type="button" class="btn btn-light editBtn">Edit</button>
                        <button type="button" class="btn btn-danger deleteBtn">Delete</button>
                    </section>
                </div>

                <!-- Hidden Edit Box -->
                <div id="editBox" style="display:none; border:1px solid black; padding:10px; margin:20px;">
                    <h5>Edit Event Details</h5>

                    <label>Change Hall:</label>
                    <select id="hallSelect">
                        <option value="">-- Select Hall --</option>
                        <option>Main Hall</option>
                        <option>Gaming Hall</option>
                        <option>Room 3</option>
                        <option>Room 13</option>
                        <option>Room 26</option>
                    </select><br><br>

                    <label>Change Date:</label>
                    <input type="date" id="dateInput"><br><br>

                    <label>Change Time:</label>
                    <select id="timeSelect">
                        <option value="">-- Select Time --</option>
                        <option>09:00 AM</option>
                        <option>10:00 AM</option>
                        <option>11:00 AM</option>
                        <option>12:00 PM</option>
                        <option>02:00 PM</option>
                        <option>03:00 PM</option>
                    </select><br><br>

                    <button id="applyBtn" class="btn btn-success">Apply</button>
                    <button id="deleteBtn" class="btn btn-danger">Delete Event</button>
                    <button id="closeBtn" class="btn btn-secondary">Close</button>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Your existing JavaScript code
        const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
        const eventsData = [12, 15, 18, 14, 10, 8, 6, 8, 19, 24, 21, 15];
        new Chart(document.getElementById('eventsPerMonth'), {
            type: 'bar',
            data: {
                labels: months,
                datasets: [{
                    label: 'Number of Events',
                    data: eventsData,
                    backgroundColor: 'rgba(54, 162, 235, 0.8)'
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 28
                    }
                },
                plugins: {
                    legend: { display: false },
                    title: {
                        display: true,
                        text: 'Number of events scheduled each month'
                    }
                }
            }
        });

        const editButtons = document.querySelectorAll(".editBtn");
        const deleteButtons = document.querySelectorAll(".deleteBtn");
        const editBox = document.getElementById("editBox");
        const hallSelect = document.getElementById("hallSelect");
        const dateInput = document.getElementById("dateInput");
        const timeSelect = document.getElementById("timeSelect");
        const applyBtn = document.getElementById("applyBtn");
        const closeBtn = document.getElementById("closeBtn");
        const deleteBtnInside = document.getElementById("deleteBtn");

        let currentEvent = null;

        // open edit box
        editButtons.forEach(button => {
            button.addEventListener("click", (e) => {
                currentEvent = e.target.closest(".event");
                editBox.style.display = "block";

                hallSelect.value = currentEvent.querySelector(".event-hall").textContent.trim();
                dateInput.value = currentEvent.querySelector(".event-date").textContent.trim();
                timeSelect.value = currentEvent.querySelector(".event-time").textContent.trim();
            });
        });

        // apply changes
        applyBtn.addEventListener("click", () => {
            if (!currentEvent) return;
            const newHall = hallSelect.value;
            const newDate = dateInput.value;
            const newTime = timeSelect.value;

            if (newHall) currentEvent.querySelector(".event-hall").textContent = newHall;
            if (newDate) currentEvent.querySelector(".event-date").textContent = newDate;
            if (newTime) currentEvent.querySelector(".event-time").textContent = newTime;

            editBox.style.display = "none";
        });

        // close box
        closeBtn.addEventListener("click", () => {
            editBox.style.display = "none";
        });

        // delete from inside edit box
        deleteBtnInside.addEventListener("click", () => {
            if (currentEvent && confirm("Are you sure you want to delete this event?")) {
                currentEvent.remove();
                editBox.style.display = "none";
            }
        });

        // delete button directly from list
        deleteButtons.forEach(button => {
            button.addEventListener("click", (e) => {
                const eventToDelete = e.target.closest(".event");
                if (confirm("Are you sure you want to delete this event?")) {
                    eventToDelete.remove();
                }
            });
        });
    </script>
</body>
</html>
<script>
// Listen for navigation messages from header iframe
window.addEventListener('message', function(event) {
    if (event.data.type === 'NAVIGATE') {
        window.location.href = '../' + event.data.url;
    }
});

// Update header active state
function updateHeaderActiveState() {
    const currentPage = window.location.pathname.split('/').pop();
    const headerFrame = document.querySelector('iframe[src*="header.html"]');
    if (headerFrame && headerFrame.contentWindow) {
        headerFrame.contentWindow.postMessage({
            type: 'UPDATE_ACTIVE_LINK',
            activePage: 'pages/' + currentPage
        }, '*');
    }
}

// Call on page load
document.addEventListener('DOMContentLoaded', updateHeaderActiveState);
</script>
<iframe src="footer.html" width="100%" height="400" frameborder="0"></iframe>
