<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css">
    <title>Event Mangement Portal</title>
    <style>
      body{
        padding: 0px;
      }
      p{
        color: #555;
      }
      .top-controls {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-bottom: 20px;
      }


      .top-controls input {
        flex: 1;
        padding: 10px;
        border-radius: 6px;
        border: 1px solid #ccc;
      }


      .top-controls button {
        padding: 10px 15px;
        border: none;
        border-radius: 6px;
        background: black;
        color: white;
        cursor: pointer;
      }
     
      table {
        width: 100%;
        border-collapse: grid;
        background: white;
        border-radius: 6px;
        overflow: hidden;
      }


      th, td {
        padding: 12px;
        border-bottom: 1px solid #eee;
        text-align: left;
      }


      th {
        background: #f0f0f0;
      }


      tr:hover {
        background: #f9f9f9;
      }
 
      @media (max-width: 576px) {
        .top-controls {
          flex-direction: column;
        }
        .top-controls input,
        .top-controls button {
          width: 100%;
        }
        body {
          padding: 10px;
        }
        table th, table td {
          white-space: nowrap;
        }
        #editBox {
          width: 100%;
          margin: 10px 0;
        }


        #editBox input,
        #editBox select {
          width: 100%;
        }
      }


      @media (max-width: 400px) {
        #editBox {
          font-size: 14px;
          padding: 12px;
        }


        #editBox button {
          width: 100%;
          margin-top: 8px;
        }
      }
    </style>
</head>
<body>
    <section class="manageevents-section">
        <h2>Manage Events</h2>
        <p>Create, update, or delete events</p>


     <div class="top-controls">
       <input type="text" id="searchInput" placeholder="Search events..." onkeyup="filterEvents()">
       <button id="addEventBtn">+ Add Event</button>
     </div>
     <div class="table-responsive">
        <table>
         <thead>
           <tr>
              <th>Event Name</th>
              <th>Date</th>
              <th>Time</th>
              <th>Room</th>
              <th>Faculty</th>
              <th>Registrations</th>
              <th>Status</th>
              <th>Action</th>
           </tr>
         </thead>
         <tbody id="myTbody">
           <tr class="event">
              <td class="event-name">AI Hackathon 2025</td>
              <td class="event-date">10/21/2025</td>
              <td class="event-time">10:00 AM</td>
              <td class="event-hall">Gaming Hall</td>
              <td class="event-faculty">Artificial Intellgince</td>
              <td >45/50</td>
              <td><button class="alert alert-info status">upcoming</button></td>
              <td><button class="editBtn" style="border: 0px; background-color: white;"><i class="fa-regular fa-pen-to-square"></i></button> <button class="deleteBtn" style="border: 0px; background-color: white;"> <i class="fa-solid fa-trash"></i></button></td>
           </tr>
           <tr class="event">
             <td class="event-name">Engineering Career Fair</td>
             <td class="event-date">25/10/2025</td>
             <td class="event-time">09:00 AM</td>
             <td class="event-hall">Main Hall</td>
             <td class="event-faculty">Engineering</td>
             <td>100/150</td>
             <td><button class="alert alert-info status">upcoming</button></td>
             <td><button class="editBtn" style="border: 0px; background-color: white;"><i class="fa-regular fa-pen-to-square"></i></button> <button class="deleteBtn" style="border: 0px; background-color: white;"> <i class="fa-solid fa-trash"></i></button></td>
           </tr>
        </tbody>
        </table>
    </div>


    <div id="editBox" style="display:none; border:1px solid black; padding:10px; margin:20px;">
        <h5>Edit Event Details</h5>
        <label>Change Event Name</label>
        <input type="text" name="eventinput" id="eventinput"><br><br>
        <label>Change Date:</label>
        <input type="date" id="dateInput"><br><br>
        <label>Change Time:</label>
        <select id="timeSelect">
          <option value="">-- Select Time --</option>
          <option>09:00 AM</option>
          <option>10:00 AM</option>
          <option>11:00 AM</option>
          <option>12:00 PM</option>
          <option>02:00 PM</option>
          <option>03:00 PM</option>
        </select><br><br>
        <label>Change Hall:</label>
        <select id="hallSelect">
          <option value="">-- Select Hall --</option>
          <option>Main Hall</option>
          <option>Gaming Hall</option>
          <option>Room 3</option>
          <option>Room 13</option>
          <option>Room 26</option>
        </select><br><br>
        <label>Choose Faculty</label>
        <select id="facultySelect">
           <option value="">-- Select Faculty --</option>
           <option>Artificial Intellgince</option>
           <option>Environmental Sciences</option>
           <option>Entrepreneurship Center</option>
           <option>Business Administration</option>
           <option>Research & Development</option>
           <option>Engineering</option>
        </select><br><br>
        <label>Status</label>
        <select id="statusSelect">
          <option value="">-- Select Status --</option>
          <option>Upcoming</option>
          <option>Pending</option>
          <option>Completed</option>
        </select><br><br>
        <button id="applyBtn" class="btn btn-success">Apply</button>
        <button id="deleteBtn" class="btn btn-danger">Delete Event</button>
        <button id="closeBtn" class="btn btn-secondary">Close</button>
    </div>


<script>
const editButtons = document.querySelectorAll(".editBtn");
const deleteButtons = document.querySelectorAll(".deleteBtn");
const eventinput = document.getElementById("eventinput");
const dateInput = document.getElementById("dateInput");
const timeSelect = document.getElementById("timeSelect");
const hallSelect = document.getElementById("hallSelect");
const facultySelect= document.getElementById("facultySelect");
const statusSelect = document.getElementById("statusSelect");
const editBox = document.getElementById("editBox");
const applyBtn = document.getElementById("applyBtn");
const closeBtn = document.getElementById("closeBtn");
const deleteBtnInside = document.getElementById("deleteBtn");
let currentEvent = null;


function updateStatusColor(row) {
    const statusBtn = row.querySelector(".status");
    const statusText = statusBtn.textContent.trim().toLowerCase();
    if (statusText === "upcoming") {
        statusBtn.style.backgroundColor = "aquamarine";
        statusBtn.style.color = "black";
    } else if (statusText === "pending") {
        statusBtn.style.backgroundColor = "red";
        statusBtn.style.color = "white";
    } else if (statusText === "completed") {
        statusBtn.style.backgroundColor = "blue";
        statusBtn.style.color = "white";
    }
}




editButtons.forEach(button => {
  button.addEventListener("click", (e) => {
    currentEvent = e.target.closest(".event");
    editBox.style.display = "block";
    eventinput.value = currentEvent.querySelector(".event-name").textContent.trim();
    dateInput.value = currentEvent.querySelector(".event-date").textContent.trim();
    timeSelect.value = currentEvent.querySelector(".event-time").textContent.trim();
    hallSelect.value = currentEvent.querySelector(".event-hall").textContent.trim();
    facultySelect.value = currentEvent.querySelector(".event-faculty").textContent.trim();
    statusSelect.value= currentEvent.querySelector(".status").textContent.trim();
  });
});




applyBtn.addEventListener("click", () => {
  if (!currentEvent) return;
  if (eventinput.value) currentEvent.querySelector(".event-name").textContent = eventinput.value;
  if (dateInput.value) currentEvent.querySelector(".event-date").textContent = dateInput.value;
  if (timeSelect.value) currentEvent.querySelector(".event-time").textContent = timeSelect.value;
  if (hallSelect.value) currentEvent.querySelector(".event-hall").textContent = hallSelect.value;
  if (facultySelect.value) currentEvent.querySelector(".event-faculty").textContent = facultySelect.value;
  if (statusSelect.value) currentEvent.querySelector(".status").textContent = statusSelect.value;


  updateStatusColor(currentEvent);
  editBox.style.display = "none";
});


closeBtn.addEventListener("click", () => { editBox.style.display = "none"; });


deleteBtnInside.addEventListener("click", () => {
  if (currentEvent && confirm("Are you sure you want to delete this event?")) {
    currentEvent.remove();
    editBox.style.display = "none";
  }
});




deleteButtons.forEach(button => {
  button.addEventListener("click", (e) => {
    const eventToDelete = e.target.closest(".event");
    if (confirm("Are you sure you want to delete this event?")) {
      eventToDelete.remove();
    }
  });
});




function filterEvents() {
    const filter = document.getElementById("searchInput").value.toUpperCase();
    const rows = document.querySelectorAll("#myTbody tr");
    rows.forEach(row => {
        const name = row.querySelector(".event-name").textContent.toUpperCase();
        const hall = row.querySelector(".event-hall").textContent.toUpperCase();
        const faculty = row.querySelector(".event-faculty").textContent.toUpperCase();
        const status = row.querySelector(".status").textContent.toUpperCase();
        row.style.display = (name.indexOf(filter) > -1 || hall.indexOf(filter) > -1 || faculty.indexOf(filter) > -1 || status.indexOf(filter) > -1) ? "" : "none";
    });
}




document.getElementById("addEventBtn").addEventListener("click", () => {
    const tbody = document.getElementById("myTbody");
    const newRow = document.createElement("tr");
    newRow.className = "event";
    newRow.innerHTML = `
        <td class="event-name">New Event</td>
        <td class="event-date">2025-11-01</td>
        <td class="event-time">09:00 AM</td>
        <td class="event-hall">Main Hall</td>
        <td class="event-faculty">Engineering</td>
        <td>0/50</td>
        <td><button class="alert alert-info status">Upcoming</button></td>
        <td>
            <button class="editBtn" style="border:0; background:white;"><i class="fa-regular fa-pen-to-square"></i></button>
            <button class="deleteBtn" style="border:0; background:white;"><i class="fa-solid fa-trash"></i></button>
        </td>
    `;
    tbody.appendChild(newRow);


    updateStatusColor(newRow);


    newRow.querySelector(".editBtn").addEventListener("click", (e) => {
        currentEvent = e.target.closest(".event");
        editBox.style.display = "block";
        eventinput.value = currentEvent.querySelector(".event-name").textContent.trim();
        dateInput.value = currentEvent.querySelector(".event-date").textContent.trim();
        timeSelect.value = currentEvent.querySelector(".event-time").textContent.trim();
        hallSelect.value = currentEvent.querySelector(".event-hall").textContent.trim();
        facultySelect.value = currentEvent.querySelector(".event-faculty").textContent.trim();
        statusSelect.value = currentEvent.querySelector(".status").textContent.trim();
    });


    newRow.querySelector(".deleteBtn").addEventListener("click", (e) => {
        if (confirm("Are you sure you want to delete this event?")) {
            e.target.closest(".event").remove();
        }
    });
});


document.querySelectorAll("#myTbody tr").forEach(row => updateStatusColor(row));
</script>
</section>
</body>
</html>

    <div id="header"></div>
    <script>
document.addEventListener("DOMContentLoaded", () => {
            fetch("header.html")
                .then(res => res.text())
                .then(data => document.getElementById("header").innerHTML = data);

            fetch("footer.html")
                .then(res => res.text())
                .then(data => document.getElementById("footer").innerHTML = data);
        });

        // Listen for navigation messages from header iframe
        window.addEventListener('message', function(event) {
            if (event.data.type === 'NAVIGATE') {
                window.location.href = event.data.url;
            }
        });

        // Update header active state
        function updateHeaderActiveState() {
            const currentPage = window.location.pathname.split('/').pop();
            const headerFrame = document.querySelector('iframe[src*="header.html"]');
            if (headerFrame && headerFrame.contentWindow) {
                headerFrame.contentWindow.postMessage({
                    type: 'UPDATE_ACTIVE_LINK',
                    activePage: currentPage
                }, '*');
            }
        }
</script>
    <script>
         // Call on page load
        document.addEventListener('DOMContentLoaded', updateHeaderActiveState);
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
document.addEventListener("DOMContentLoaded", function(){
  const currentPage = window.location.pathname.split('/').pop() || 'managmentevent.html';
  document.querySelectorAll(".nav-link").forEach(link => {
    if(link.getAttribute('href') === currentPage) link.classList.add("active");
  });


  document.getElementById('logoutBtn')?.addEventListener('click', function(e){
    e.preventDefault();
    if(confirm('Are you sure you want to logout?')) alert('Logging out...');
  });
  document.addEventListener('DOMContentLoaded', initDropdowns);

});
</script>
<div id="footer"></div>
</body>
</html>


